<!DOCTYPE html>
<!-- https://medium.com/conectric-networks/a-look-at-server-sent-events-54a77f8d6ff7 -->

<html>
<body>
<button onclick="closesse()">Close</button>
<h1>Getting server updates</h1>
<div id="result"></div>

<script>

function closesse() {
    source.close();
}




if(typeof(EventSource) !== "undefined") {
    var source = new EventSource("sse_event.php");  
    source.onmessage = function(event) {
        console.log(event);
        document.getElementById("result").innerHTML += event.data + "<br>";
    };

    // source.addEventListener('ping' , function(event) {
    //     console.log(event);
    //     var o = JSON.parse(event.data);
    //     console.log(o);
    // });
} else {
    document.getElementById("result").innerHTML = "Sorry, your browser does not support server-sent events...";
}

</script>

</body>
</html>
